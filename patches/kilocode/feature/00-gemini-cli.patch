file cli/docs/PROVIDER_CONFIGURATION.md
label This guide provides detailed information on how to configure each provider in Ki
    - [DeepInfra](#deepinfra)
    - [IO Intelligence](#io-intelligence)
    - [Qwen Code](#qwen-code)
+    - [Gemini CLI](#gemini-cli)
    - [ZAI](#zai)
    - [Minimax](#minimax)
    - [Unbound](#unbound)

file cli/docs/PROVIDER_CONFIGURATION.md
label Qwen Code AI models.

---

+### gemini-cli
+
+Gemini CLI integration.
+
+**Description**: Use Google's Gemini models through CLI with OAuth authentication.
+
+**Required Fields**:
+
+- `geminiCliOAuthPath` (text): Path to OAuth credentials file (default: `~/.gemini/oauth_creds.json`)
+- `geminiCliProjectId` (text): Google Cloud project ID
+- `apiModelId` (text): The model to use (default: `gemini-2.5-flash-preview-04-17`)
+
+**Example Configuration**:
+
+```json
+{
+	"id": "default",
+	"provider": "gemini-cli",
+	"geminiCliOAuthPath": "~/.gemini/oauth_creds.json",
+	"geminiCliProjectId": "my-project-123",
+	"apiModelId": "gemini-2.5-flash-preview-04-17"
+}
+```
+
+**Default Model**: `gemini-2.5-flash-preview-04-17`
+
+**Notes**:
+
+- Requires OAuth credentials file
+- Requires Google Cloud project
+
+
### zai

ZAI AI platform.

file cli/src/commands/__tests__/models-api.test.ts
label describe("models-api command", () => {
			"featherless",
			"roo",
			"claude-code",
+			"gemini-cli",
		]

		it.each(staticProviders)("should recognize %s as static provider", (provider) => {

file cli/src/config/mapper.ts
label export function getModelIdForProvider(provider: ProviderConfig): string {
		case "bedrock":
		case "vertex":
		case "gemini":
+		case "gemini-cli":
		case "mistral":
		case "moonshot":
		case "minimax":

file cli/src/config/types.ts
label export {
	bedrockProviderSchema,
	vertexProviderSchema,
	geminiProviderSchema,
+	geminiCliProviderSchema,
	mistralProviderSchema,
	moonshotProviderSchema,
	minimaxProviderSchema,

file cli/src/config/types.ts
label export {
	type BedrockProviderConfig,
	type VertexProviderConfig,
	type GeminiProviderConfig,
+	type GeminiCliProviderConfig,
	type MistralProviderConfig,
	type MoonshotProviderConfig,
	type MinimaxProviderConfig,

file cli/src/constants/providers/__tests__/models.test.ts
label describe("Static Provider Models", () => {
			"fireworks",
			"featherless",
			"claude-code",
+			"gemini-cli",
		]

		it.each(staticProviders)("should return non-empty models for %s provider", (provider) => {

file cli/src/constants/providers/labels.ts
label export const PROVIDER_LABELS: Record<ProviderName, string> = {
	deepinfra: "DeepInfra",
	"io-intelligence": "IO Intelligence",
	"qwen-code": "Qwen Code",
+	"gemini-cli": "Gemini CLI",
	zai: "Zai",
	minimax: "MiniMax",
	unbound: "Unbound",

file cli/src/constants/providers/models.ts
label import {
	rooDefaultModelId,
	claudeCodeModels,
	claudeCodeDefaultModelId,
+	geminiCliModels,
+	geminiCliDefaultModelId,
	minimaxModels,
	minimaxDefaultModelId,
	ovhCloudAiEndpointsDefaultModelId,

file cli/src/constants/providers/models.ts
label export const PROVIDER_TO_ROUTER_NAME: Record<ProviderName, RouterName | null> =
	featherless: null,
	roo: null,
	"claude-code": null,
+	"gemini-cli": null,
	"virtual-quota-fallback": null,
	huggingface: null,
	inception: null,

file cli/src/constants/providers/models.ts
label export const PROVIDER_MODEL_FIELD: Record<ProviderName, string | null> = {
	featherless: null,
	roo: null,
	"claude-code": null,
+	"gemini-cli": null,
	"virtual-quota-fallback": null,
	huggingface: null,
	inception: "inceptionLabsModelId",

file cli/src/constants/providers/models.ts
label export const DEFAULT_MODEL_IDS: Partial<Record<ProviderName, string>> = {
	minimax: "MiniMax-M2",
	zai: internationalZAiDefaultModelId,
	roo: rooDefaultModelId,
+	"gemini-cli": geminiCliDefaultModelId,
	ovhcloud: ovhCloudAiEndpointsDefaultModelId,
}


file cli/src/constants/providers/models.ts
label export function getModelsByProvider(params: {
				models: claudeCodeModels as ModelRecord,
				defaultModel: claudeCodeDefaultModelId,
			}
+		case "gemini-cli":
+			return {
+				models: geminiCliModels as ModelRecord,
+				defaultModel: geminiCliDefaultModelId,
+			}
		default:
			// For providers without static models (e.g., vscode-lm, fake-ai, virtual-quota-fallback)
			return {

file cli/src/constants/providers/settings.ts
label export const FIELD_REGISTRY: Record<string, FieldMetadata> = {
		placeholder: "Enter OAuth credentials path...",
	},

+	// Gemini CLI fields
+	geminiCliOAuthPath: {
+		label: "OAuth Credentials Path",
+		type: "text",
+		placeholder: "Enter OAuth credentials path...",
+	},
+	geminiCliProjectId: {
+		label: "Project ID",
+		type: "text",
+		placeholder: "Enter project ID...",
+	},
+
	// ZAI fields
	zaiApiKey: {
		label: "API Key",

file cli/src/constants/providers/settings.ts
label export const getProviderSettings = (provider: ProviderName, config: ProviderSett
		case "qwen-code":
			return [createFieldConfig("qwenCodeOauthPath", config, "~/.qwen/oauth_creds.json")]

+		case "gemini-cli":
+			return [
+				createFieldConfig("geminiCliOAuthPath", config, "~/.gemini/oauth_creds.json"),
+				createFieldConfig("geminiCliProjectId", config),
+			]
+
		case "zai":
			return [
				createFieldConfig("zaiApiKey", config),

file cli/src/constants/providers/settings.ts
label export const PROVIDER_DEFAULT_MODELS: Record<ProviderName, string> = {
	deepinfra: "meta-llama/Meta-Llama-3.1-70B-Instruct",
	"io-intelligence": "gpt-4o",
	"qwen-code": "qwen-coder-plus-latest",
+	"gemini-cli": "gemini-1.5-pro-latest",
	zai: "gpt-4o",
	unbound: "gpt-4o",
	requesty: "gpt-4o",

file cli/src/constants/providers/validation.ts
label export const PROVIDER_REQUIRED_FIELDS: Record<ProviderName, string[]> = {
	deepinfra: ["deepInfraApiKey", "deepInfraModelId"],
	"io-intelligence": ["ioIntelligenceApiKey", "ioIntelligenceModelId"],
	"qwen-code": ["qwenCodeOauthPath", "apiModelId"],
+	"gemini-cli": ["geminiCliOAuthPath", "geminiCliProjectId", "apiModelId"],
	zai: ["zaiApiKey", "zaiApiLine", "apiModelId"],
	unbound: ["unboundApiKey", "unboundModelId"],
	requesty: ["requestyApiKey", "requestyModelId"],

file packages/core-schemas/src/config/provider.ts
label export const geminiProviderSchema = baseProviderSchema.extend({
	enableGrounding: z.boolean().optional(),
})

+// Gemini CLI provider
+export const geminiCliProviderSchema = baseProviderSchema.extend({
+	provider: z.literal("gemini-cli"),
+	apiModelId: z.string().optional(),
+	geminiCliOAuthPath: z.string().optional(),
+	geminiCliProjectId: z.string().optional(),
+})
+
// Mistral provider
export const mistralProviderSchema = baseProviderSchema.extend({
	provider: z.literal("mistral"),

file packages/core-schemas/src/config/provider.ts
label export const providerConfigSchema = z.discriminatedUnion("provider", [
	bedrockProviderSchema,
	vertexProviderSchema,
	geminiProviderSchema,
+	geminiCliProviderSchema,
	mistralProviderSchema,
	moonshotProviderSchema,
	minimaxProviderSchema,

file packages/core-schemas/src/config/provider.ts
label export type InceptionProviderConfig = z.infer<typeof inceptionProviderSchema>
export type BedrockProviderConfig = z.infer<typeof bedrockProviderSchema>
export type VertexProviderConfig = z.infer<typeof vertexProviderSchema>
export type GeminiProviderConfig = z.infer<typeof geminiProviderSchema>
+export type GeminiCliProviderConfig = z.infer<typeof geminiCliProviderSchema>
export type MistralProviderConfig = z.infer<typeof mistralProviderSchema>
export type MoonshotProviderConfig = z.infer<typeof moonshotProviderSchema>
export type MinimaxProviderConfig = z.infer<typeof minimaxProviderSchema>

file packages/types/src/provider-settings.ts
label export const providerNames = [
	"featherless",
	"fireworks",
	"gemini",
+	"gemini-cli",
	"groq",
	"mistral",
	"moonshot",

file packages/types/src/provider-settings.ts
label export const providerNames = [
	// kilocode_change start
	"kilocode",
	"minimax",
+	"gemini-cli",
	"virtual-quota-fallback",
	"synthetic",
	"inception",

file packages/types/src/provider-settings.ts
label const geminiSchema = apiModelIdProviderModelSchema.extend({
	enableGrounding: z.boolean().optional(),
})

+// kilocode_change start
+const geminiCliSchema = apiModelIdProviderModelSchema.extend({
+	geminiCliOAuthPath: z.string().optional(),
+	geminiCliProjectId: z.string().optional(),
+})
+// kilocode_change end
+
const openAiCodexSchema = apiModelIdProviderModelSchema.extend({
	// No additional settings needed - uses OAuth authentication
})

file packages/types/src/provider-settings.ts
label export const providerSettingsSchemaDiscriminated = z.discriminatedUnion("apiProv
	fakeAiSchema.merge(z.object({ apiProvider: z.literal("fake-ai") })),
	xaiSchema.merge(z.object({ apiProvider: z.literal("xai") })),
	// kilocode_change start
+	geminiCliSchema.merge(z.object({ apiProvider: z.literal("gemini-cli") })),
	kilocodeSchema.merge(z.object({ apiProvider: z.literal("kilocode") })),
	virtualQuotaFallbackSchema.merge(z.object({ apiProvider: z.literal("virtual-quota-fallback") })),
	syntheticSchema.merge(z.object({ apiProvider: z.literal("synthetic") })),

file packages/types/src/provider-settings.ts
label export const providerSettingsSchema = z.object({
	...lmStudioSchema.shape,
	...geminiSchema.shape,
	// kilocode_change start
+	...geminiCliSchema.shape,
	...kilocodeSchema.shape,
	...virtualQuotaFallbackSchema.shape,
	...syntheticSchema.shape,

file packages/types/src/provider-settings.ts
label export const modelIdKeysByProvider: Record<TypicalProvider, ModelIdKey> = {
	ollama: "ollamaModelId",
	lmstudio: "lmStudioModelId",
	gemini: "apiModelId",
+	"gemini-cli": "apiModelId",
	mistral: "apiModelId",
	moonshot: "apiModelId",
	minimax: "apiModelId",

file packages/types/src/provider-settings.ts
label export const getApiProtocol = (provider: ProviderName | undefined, modelId?: str
 */

export const MODELS_BY_PROVIDER: Record<
+	Exclude<ProviderName, "fake-ai" | "human-relay" | "gemini-cli" | "openai" | "gemini">,
-	Exclude<ProviderName, "fake-ai" | "human-relay" | "openai" | "gemini">,
	{ id: ProviderName; label: string; models: string[] }
> = {
	anthropic: {

file packages/types/src/providers/index.ts
label export * from "./featherless.js"
export * from "./fireworks.js"
export * from "./gemini.js"
// kilocode_change start
+export * from "./gemini-cli.js"
export * from "./ovhcloud.js"
export * from "./synthetic.js"
export * from "./inception.js"

file packages/types/src/providers/index.ts
label export function getProviderDefaultModelId(
		case "vercel-ai-gateway":
			return vercelAiGatewayDefaultModelId
		case "anthropic":
+		case "gemini-cli":
		case "human-relay":
		case "fake-ai":
		default:

file src/api/index.ts
label export function buildApiHandler(configuration: ProviderSettings): ApiHandler {
		// kilocode_change start
		case "kilocode":
			return new KilocodeOpenrouterHandler(options)
+		case "gemini-cli":
+			return new GeminiCliHandler(options)
		case "virtual-quota-fallback":
			return new VirtualQuotaFallbackHandler(options)
		// kilocode_change end

file src/api/index.ts
label export function buildApiHandler(configuration: ProviderSettings): ApiHandler {
		case "baseten":
			return new BasetenHandler(options)
		default:
+			apiProvider satisfies "gemini-cli" | undefined
-			apiProvider satisfies undefined
			return new AnthropicHandler(options)
	}
}

file src/api/providers/index.ts
label export { UnboundHandler } from "./unbound"
export { VertexHandler } from "./vertex"
// kilocode_change start
export { OVHcloudAIEndpointsHandler } from "./ovhcloud"
+export { GeminiCliHandler } from "./gemini-cli"
export { VirtualQuotaFallbackHandler } from "./virtual-quota-fallback"
export { SyntheticHandler } from "./synthetic"
export { InceptionLabsHandler } from "./inception"

file src/shared/checkExistApiConfig.ts
label export function checkExistKey(config: ProviderSettings | undefined) {
	// Special case for human-relay, fake-ai, claude-code, qwen-code, and roo providers which don't need any configuration.
	if (
		config.apiProvider &&
+		["human-relay", "fake-ai", "claude-code", "qwen-code", "roo", "gemini-cli"].includes(config.apiProvider) // kilocode_change: add gemini-cli
-		["human-relay", "fake-ai", "claude-code", "qwen-code", "roo"].includes(config.apiProvider)
	) {
		return true
	}

file webview-ui/src/components/kilocode/hooks/useProviderModels.ts
label import {
	litellmDefaultModelId,
	qwenCodeModels,
	qwenCodeDefaultModelId,
+	geminiCliModels,
	claudeCodeModels,
	claudeCodeDefaultModelId,
	doubaoModels,

file webview-ui/src/components/kilocode/hooks/useProviderModels.ts
label export const getModelsByProvider = ({
				defaultModel: qwenCodeDefaultModelId,
			}
		}
+		case "gemini-cli": {
+			return {
+				models: geminiCliModels,
+				defaultModel: geminiDefaultModelId,
+			}
+		}
		case "anthropic": {
			return {
				models: anthropicModels,

file webview-ui/src/components/settings/ApiOptions.tsx
label import {
	claudeCodeDefaultModelId,
	qwenCodeDefaultModelId,
	geminiDefaultModelId,
+	geminiCliDefaultModelId,
	deepSeekDefaultModelId,
	moonshotDefaultModelId,
	// kilocode_change start

file webview-ui/src/components/settings/ApiOptions.tsx
label import {
	VSCodeLM,
	XAI,
	// kilocode_change start
+	GeminiCli,
	VirtualQuotaFallbackProvider,
	Synthetic,
	OvhCloudAiEndpoints,

file webview-ui/src/components/settings/ApiOptions.tsx
label const ApiOptions = ({
				lmstudio: { field: "lmStudioModelId" },
				// kilocode_change start
				kilocode: { field: "kilocodeModel", default: kilocodeDefaultModel },
+				"gemini-cli": { field: "apiModelId", default: geminiCliDefaultModelId },
				synthetic: { field: "apiModelId", default: syntheticDefaultModelId },
				ovhcloud: { field: "ovhCloudAiEndpointsModelId", default: ovhCloudAiEndpointsDefaultModelId },
				inception: { field: "inceptionLabsModelId", default: inceptionDefaultModelId },

file webview-ui/src/components/settings/ApiOptions.tsx
label const ApiOptions = ({

		// kilocode_change start
		// Providers that don't have documentation pages yet
+		const excludedProviders = [
+			"gemini-cli",
+			"moonshot",
+			"chutes",
+			"cerebras",
+			"litellm",
+			"zai",
+			"qwen-code",
+			"minimax",
+		]
-		const excludedProviders = ["moonshot", "chutes", "cerebras", "litellm", "zai", "qwen-code", "minimax"]

		// Skip documentation link when the provider is excluded because documentation is not available
		if (excludedProviders.includes(selectedProvider)) {

file webview-ui/src/components/settings/ApiOptions.tsx
label const ApiOptions = ({
			)}

			{/* kilocode_change start */}
+			{selectedProvider === "gemini-cli" && (
+				<GeminiCli apiConfiguration={apiConfiguration} setApiConfigurationField={setApiConfigurationField} />
+			)}
+
			{selectedProvider === "virtual-quota-fallback" && (
				<VirtualQuotaFallbackProvider
					apiConfiguration={apiConfiguration}

file webview-ui/src/components/settings/constants.ts
label import {
	moonshotModels,
	// kilocode_change start
	// geminiModels,
+	geminiCliModels,
	// kilocode_change end
	mistralModels,
	openAiNativeModels,

file webview-ui/src/components/settings/constants.ts
label export const MODELS_BY_PROVIDER: Partial<Record<ProviderName, Record<string, Mod
	moonshot: moonshotModels,
	// kilocode_change start
	// gemini: geminiModels,
+	"gemini-cli": geminiCliModels,
	// kilocode_change end
	mistral: mistralModels,
	"openai-native": openAiNativeModels,

file webview-ui/src/components/settings/constants.ts
label export const PROVIDERS = [
	{ value: "doubao", label: "Doubao", proxy: false },
	// kilocode_change start
	{ value: "inception", label: "Inception", proxy: false },
+	{ value: "gemini-cli", label: "Gemini CLI", proxy: false },
	{ value: "virtual-quota-fallback", label: "Virtual Quota Fallback", proxy: false },
	{ value: "synthetic", label: "Synthetic", proxy: false },
	{ value: "ovhcloud", label: "OVHcloud AI Endpoints", proxy: false },

file webview-ui/src/components/settings/providers/index.ts
label export { VSCodeLM } from "./VSCodeLM"
export { XAI } from "./XAI"
// kilocode_change start
export { OvhCloudAiEndpoints } from "./OvhCloud"
+export { GeminiCli } from "./GeminiCli"
export { VirtualQuotaFallbackProvider } from "./VirtualQuotaFallbackProvider"
export { Inception } from "./Inception"
export { Synthetic } from "./Synthetic"

file webview-ui/src/components/ui/hooks/useSelectedModel.ts
label import {
	geminiModels,
	geminiDefaultModelId,
	// kilocode_change start
+	geminiCliDefaultModelId,
+	geminiCliModels,
	syntheticDefaultModelId,
	ovhCloudAiEndpointsDefaultModelId,
	inceptionDefaultModelId,

file webview-ui/src/components/ui/hooks/useSelectedModel.ts
label function getSelectedModel({
				info: routerModels["kilocode"][invalidOrDefaultModel],
			}
		}
+		case "gemini-cli": {
+			const id = apiConfiguration.apiModelId ?? geminiCliDefaultModelId
+			const info = geminiCliModels[id as keyof typeof geminiCliModels]
+			return { id, info }
+		}
		case "virtual-quota-fallback": {
			if (virtualQuotaActiveModel) {
				return virtualQuotaActiveModel

file webview-ui/src/components/ui/hooks/useSelectedModel.ts
label function getSelectedModel({
		// case "human-relay":
		// case "fake-ai":
		default: {
+			provider satisfies "anthropic" | "gemini-cli" | "qwen-code" | "fake-ai" | "human-relay" | "kilocode"
-			provider satisfies "anthropic" | "qwen-code" | "fake-ai" | "human-relay" | "kilocode"
			const id = apiConfiguration.apiModelId ?? defaultModelId
			const baseInfo = anthropicModels[id as keyof typeof anthropicModels]


